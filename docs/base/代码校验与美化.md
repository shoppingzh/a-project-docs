# ä»£ç æ ¡éªŒä¸ç¾åŒ–

æ­å¥½äº†é¡¹ç›®ï¼Œè¿«ä¸åŠå¾…æƒ³è¦ç¼–ç ï¼Ÿ

æˆ‘çŸ¥é“ä½ å¾ˆæ€¥ï¼Œä½†ä½ å…ˆåˆ«æ€¥ã€‚å¼€å§‹ç¼–ç å‰ï¼Œå…ˆæƒ³æƒ³ï¼šç°åœ¨æ‰€å·¥ä½œçš„é¡¹ç›®æ˜¯å¤šäººåä½œçš„æƒ…å†µå—ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆä½ éœ€è¦åšå¥½è¿™äº›äº‹ï¼š

1. åˆ¶å®šä¸€å¥—å®Œå–„çš„ã€ç¬¦åˆå›¢é˜Ÿç°çŠ¶çš„ç¼–ç è§„èŒƒï¼›
2. ä½¿ç”¨ä¸€äº›å·¥å…·ç®¡æ§ç¼–ç é£æ ¼çš„ç»Ÿä¸€æ€§ï¼ŒåŸºäºæœºåˆ¶è€Œä¸æ˜¯çº¦å®šã€‚

## è¦åšä»€ä¹ˆï¼Ÿ

åˆ¶å®šç¼–ç è§„èŒƒçš„ç›®çš„æ˜¯å¯¹ **ä»£ç ** è¿›è¡Œ **è§„èŒƒæ€§** æ ¡éªŒï¼Œæˆ‘ä»¬å…ˆè€ƒè™‘ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå¯¹ä»€ä¹ˆä»£ç è¿›è¡Œæ ¡éªŒï¼Ÿ

æˆ‘ä»¬ä»¥å‰ç«¯å¼€å‘ä¸ºä¾‹ï¼ˆä½†å…¶å®ä¸é™äºå‰ç«¯çš„å¼€å‘ï¼Œä¹Ÿå¯ä»¥æ˜¯NodeæœåŠ¡ç«¯çš„å¼€å‘ï¼‰ï¼Œçœ‹çœ‹æˆ‘ä»¬å¹³æ—¶éƒ½åœ¨è·Ÿä»€ä¹ˆä»£ç æ‰“äº¤é“ï¼š

| åœºæ™¯ | ä»£ç ç±»å‹ |
| -- | -- |
| å†™é€»è¾‘ | `.js` `.ts` |
| å†™ç»„ä»¶ | `.jsx` `.tsx` |
| å†™æ ·å¼ | `.css` `.scss` `.less` |
| å†™é…ç½® | `.json` `.yaml` |
| å†™æ–‡æ¡£ | `.md` |

æˆ‘ä»¬ä¼šå†™å„ç§ç±»å‹çš„ä»£ç ï¼Œå› æ­¤å°±éœ€è¦å¯¹å„ç§ç±»å‹çš„ä»£ç åˆ¶å®šä¸åŒçš„ç¼–ç è§„èŒƒå¹¶æ ¡éªŒã€‚è¿™æ˜¯ä¸€ä»¶éå¸¸æ¶ˆè€—è€å¿ƒçš„äº‹æƒ…ã€‚

ä½†æ˜¯ï¼ä½ å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®çš„éœ€è¦ï¼Œé€‰æ‹©ç¼–ç è§„èŒƒè¦åšåˆ°ä»€ä¹ˆç¨‹åº¦ã€‚å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘é€‰æ‹©ï¼š

| åœºæ™¯ | ä»£ç ç±»å‹ | ç¼–ç è§„èŒƒåˆ¶å®š |
| -- | -- | -- |
| å†™é€»è¾‘ | `.js` `.ts` | âœ… å¿…å¤‡ |
| å†™ç»„ä»¶ | `.jsx` `.tsx` | âœ… å¿…å¤‡ |
| å†™æ ·å¼ | `.css` `.scss` `.less` | âŒ ä¸åšï¼Œé¡¹ç›®é€‰ç”¨ `TailwindCSS`ï¼Œæ ·å¼ä»£ç æå°‘ |
| å†™é…ç½® | `.json` `.yaml` | ğŸ¢ æ¸è¿›å¼åš |
| å†™æ–‡æ¡£ | `.md` | ğŸ¢ æ¸è¿›å¼åš |

ç¡®å®šå¥½è¦å¯¹å“ªäº›ä»£ç åˆ¶å®šç¼–ç è§„èŒƒï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬èŠä¸€èŠåˆ¶å®šè§„èŒƒè¦åšçš„å…·ä½“äº‹æƒ…ã€‚è®©æˆ‘ä»¬å…ˆçœ‹çœ‹è¿™ä¸¤æ®µä»£ç ï¼š

| å¥½çš„ä»£ç  | å·®çš„ä»£ç  |
| -- | -- |
| `let a = 1; a = 2;` | `const a = 1; a = 2;` |
| `const arr = [1, 2, 3]` | `const arr = [1, 2, 3];` |

å¯¹ç¬¬ä¸€æ®µä»£ç ï¼Œç›¸ä¿¡ä½ æ²¡æœ‰å¼‚è®®ï¼Œå¦‚æœå·¥å…·èƒ½å¸®åŠ©æˆ‘ä»¬è¯†åˆ«åˆ°ä»£ç ä¸­é”™è¯¯åœ°å¯¹ä¸€ä¸ªå¸¸é‡å†æ¬¡èµ‹å€¼çš„é”™è¯¯ï¼Œé‚£çœŸçš„å¤ªniceäº†ï¼

ä½†æ˜¯ï¼Œå¯¹ç¬¬äºŒæ®µä»£ç ï¼Œå¾ˆå¤šäººä¸æ•¢è‹ŸåŒï¼Œä¸ºä»€ä¹ˆåªæ˜¯åœ¨å¥æœ«åŠ äº†ä¸€ä¸ªåˆ†å·ï¼Œå´è¢«è§†ä¸ºå·®çš„ä»£ç ï¼Ÿ

æ˜¯çš„ï¼Œé€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œå¸Œæœ›è¯»è€…æ¸…æ¥šï¼Œå¯¹ä»£ç çš„æ ¡éªŒå…¶å®åŒºåˆ†ä¸ºï¼š

| æ ¡éªŒç±»å‹ | ç‰¹ç‚¹ | å¥½çš„ä»£ç  | å·®çš„ä»£ç  |
| -- | -- | -- | -- |
| é€»è¾‘ | ç¨³å®šçš„æœ€ä½³å®è·µï¼Œä¸éµå¾ªå¯èƒ½ä¼šå¼•å‘é”™è¯¯ | `let a = 1; a = 2;` | `const a = 1; a = 2;` |
| é£æ ¼ | å› é¡¹ç›®è€Œå¼‚ï¼Œä¸éµå¾ªåªæ˜¯ä¸å¤Ÿç¾è§‚ | `const arr = [1, 2, 3]` | `const arr = [1, 2, 3];` |

å› æ­¤ï¼Œåˆ¶å®šè§„èŒƒæ—¶ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯å¯¹ **é£æ ¼ç±»è§„èŒƒ** è¿›è¡Œé‡å†™ï¼Œè€Œé€»è¾‘ç±»çš„è§„èŒƒï¼Œç”±äºå…·æœ‰ç¨³å®šçš„ä¸šç•Œæœ€ä½³å®è·µï¼Œåˆ«äººå·²ç»å¸®æˆ‘ä»¬æ•´ç†å¥½äº†ï¼Œåˆ°æ—¶å€™æˆ‘ä»¬ç›´æ¥æ‹¿è¿‡æ¥ç”¨å°±å¥½äº†ã€‚

## æ€ä¹ˆåšï¼Ÿ

ç»è¿‡ä¸Šä¸€ç« èŠ‚çš„å­¦ä¹ ï¼Œæˆ‘ä»¬æ˜ç¡®äº†è¦åšçš„ä¸¤ä»¶äº‹ï¼š

1. å¯¹ `.js` `.ts` `.jsx` `.tsx` åˆ¶å®šç¼–ç è§„èŒƒï¼›
2. ä¸»è¦å…³æ³¨é£æ ¼ç±»è§„èŒƒï¼Œé€»è¾‘ç±»è§„èŒƒç›´æ¥ç»§æ‰¿ä¸šç•Œæœ€ä½³å®è·µã€‚

æˆ‘ä»¬é€‰ç”¨ **`ESLint`** æ¥å®ç°ç¼–ç è§„èŒƒçš„æ ¡éªŒä¸ç¾åŒ–å·¥ä½œã€‚

ä»Šå¤©çš„ESLintå·²ç»è¶³å¤Ÿå¼ºå¤§äº†ã€‚åœ¨æˆ‘å†™ä¸‹è¿™ç¯‡æ–‡ç« æ—¶ï¼ŒESLintçš„ç‰ˆæœ¬å·²ç»æ¥åˆ°äº† `9.9.0` ï¼ŒåŸæ¥çš„ `.eslintrc` æ–¹æ¡ˆå·²ç»è¢«é‡æ„ä¸º `eslint.config.js` çš„ **Flat Config** æ–¹æ¡ˆã€‚ç›¸æ¯”è¿‡å»ï¼Œå¦‚ä»Šçš„ESLintå·²ç»å˜å¾—æ›´åŠ  **ç®€å•** å’Œ **é«˜æ•ˆ** ã€‚

å¦‚ä½•å°†æ–°ç‰ˆæœ¬çš„ESLintè·‘èµ·æ¥ï¼Œå»ºè®®è¿˜æ˜¯ä»å®˜ç½‘çš„æ•™ç¨‹å…¥æ‰‹ï¼š[https://eslint.org/docs/latest/use/getting-started](https://eslint.org/docs/latest/use/getting-started)ã€‚

åœ¨è¿™é‡Œï¼Œä¹Ÿç»™å‡ºä¸€ä¸ªåˆæ­¥çš„æ•™ç¨‹ï¼Œå…·ä½“è¿›é˜¶çš„ç©æ³•è¯·ä»¥å®˜ç½‘ä¸ºä¸»ã€‚

é¦–å…ˆéœ€è¦å…ˆå®‰è£…å¿…è¦çš„åŒ…ï¼š

```bash
pnpm i -D eslint @eslint/js
# npm
npm i -D eslint @eslint/js
# yarn
yarn add -D eslint @eslint/js
```

> `@eslint/js` åŒ…ä¸­åŒ…å«äº†å‰é¢æ‰€è¿°çš„ä¸šç•Œå¯¹äºé€»è¾‘ç±»è§„èŒƒçš„æœ€ä½³å®è·µã€‚

ç„¶åï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»º `eslint.config.js`ï¼š

```js
import js from '@eslint/js'

/** @type {import('eslint').Linter.Config[]} */
export default [
  js.configs.recommended,
]
```

> æ³¨ï¼šå¦‚æœä½ çš„é¡¹ç›® `package.json` çš„ `type` å­—æ®µä¸æ˜¯ `module` ï¼Œåˆ™ä½¿ç”¨CommonJSçš„æ–¹å¼å¼•å…¥æ¨¡å—ã€‚

è¿™é‡Œæˆ‘ä»¬åªé…ç½®äº†jsçš„æ ¡éªŒè§„èŒƒä½¿ç”¨æ¨èè§„èŒƒï¼Œå³å‰é¢æˆ‘ä»¬æåˆ°çš„ä¸šç•Œæœ€ä½³å®è·µã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è·‘ç‚¹ä»£ç çœ‹çœ‹æ•ˆæœã€‚

åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º `src` ç›®å½•ï¼Œåœ¨ `src` ç›®å½•ä¸‹æ–°å»º `index.js` æ–‡ä»¶ï¼š

```js
const a = 1
a = 2
```

å¦‚æœä½ çš„VSCodeå®‰è£…äº†ESLintæ’ä»¶ï¼Œé‚£ä¹ˆåœ¨ç¼–ç ç•Œé¢å°±å¯ä»¥ç›´æ¥çœ‹åˆ°æ ¡éªŒçš„ç»“æœï¼š

![](./images/eslintæ ¡éªŒæ•ˆæœ.png)

å¯è§ï¼ŒESLintçš„æ¨èé…ç½®ä¸ä»…è®¤ä¸ºå¯¹å¸¸é‡çš„å†èµ‹å€¼æ˜¯ä¸€ç§é”™è¯¯ï¼Œè¿å®šä¹‰ä¸ä½¿ç”¨çš„å˜é‡éƒ½ä¸å…è®¸ï¼Œè¿™ä¸ªè§„åˆ™æœªå…è¿‡äºä¸¥æ ¼ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `eslint.config.js` ä¸­è¦†ç›–æ­¤è§„åˆ™ï¼š

```js
import js from '@eslint/js'

/** @type {import('eslint').Linter.Config[]} */
export default [
  js.configs.recommended,
  {
    rules: {
      'no-unused-vars': [0],
    }
  }
]
```

å½“æˆ‘ä»¬å†å›åˆ°ä»£ç é‡Œï¼Œå·²ç»çœ‹ä¸åˆ°é‚£ä¸€æ¡æ ¡éªŒé”™è¯¯äº†ï¼š

![](./images/eslintæ ¡éªŒæ•ˆæœ2.png)


`@eslint/js` ä¸­æ¨èäº†å®¹æ˜“å¼•å‘é”™è¯¯çš„è§„åˆ™ï¼Œæˆ‘ä¸ªäººçš„å»ºè®®æ˜¯ï¼š**ç»§æ‰¿å®ƒï¼Œä½†ä¸è¦ä¿®æ”¹å®ƒã€‚**

ç†ç”±å¾ˆç®€å•ï¼Œä½ åº”è¯¥ç›¸ä¿¡å®˜æ–¹äººå‘˜ä¸ºä½ ç²¾æŒ‘ç»†é€‰ã€ç»†ç»†æ‰“ç£¨å‡ºæ¥çš„è§„åˆ™åˆ—è¡¨ï¼Œç›¸ä¿¡ä¸€å¸®äººä¸ºä¸€ä¸ªè§„åˆ™çš„æ¾ç´§ç¨‹åº¦è€Œæ¿€çƒˆè®¨è®ºçš„æˆæœã€‚



## é£æ ¼ç±»è§„åˆ™æ€ä¹ˆé…ç½®ï¼Ÿ

`@eslint/js` ä¸­å¹¶æ²¡æœ‰ç»™å‡ºé£æ ¼ç±»è§„åˆ™ï¼Œæˆ‘ä»¬å¦‚ä½•é…ç½®ä¸“å±äºè‡ªå·±çš„é£æ ¼ç±»è§„åˆ™å‘¢ï¼Ÿ

> è¯´åˆ°è¿™é‡Œï¼Œå…¶å®è¿˜æœ‰ä¸€æ®µå°æ’æ›²ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒESLintçš„æ—©æœŸç‰ˆæœ¬æ˜¯æœ‰é£æ ¼ç±»è§„åˆ™çš„é…ç½®çš„ï¼Œä½†é•¿æœŸä»¥æ¥ï¼ŒESLintçš„ç»´æŠ¤äººå‘˜è§‰å¾—ï¼Œç»´æŠ¤é£æ ¼ç±»è§„åˆ™æ˜¯ä¸€ä»¶åƒåŠ›ä¸è®¨å¥½çš„ã€çç¢çš„ã€æœ¬æœ«å€’ç½®çš„äº‹æƒ…ï¼Œä»–ä»¬çš„é‡ç‚¹å·¥ä½œåº”è¯¥æ˜¯å¯¹äºjsçš„æœ€ä½³å®è·µè¿›è¡Œè§„èŒƒï¼Œè€Œä¸æ˜¯å¤©å¤©å¤„ç†ç”¨æˆ·å¯¹äºé£æ ¼çš„éœ€æ±‚ã€‚
>
> å› æ­¤ï¼Œè‡ªä» `8.53.0` ç‰ˆæœ¬åï¼ŒESLintå°†æ‰€æœ‰é£æ ¼ç±»è§„åˆ™å…¨éƒ¨æ ‡è®°ä¸ºè¿‡æ—¶ï¼Œè‡ªæ­¤ï¼Œé£æ ¼ç±»è§„åˆ™æ­£å¼é€€å‡ºESLintçš„èˆå°ã€‚
>
> ä½œè€…çš„åŸè¯å¯ä»¥å‚è€ƒï¼š[https://github.com/eslint/eslint/issues/17522](https://github.com/eslint/eslint/issues/17522)



é£æ ¼ç±»è§„åˆ™å–æ¶ˆåï¼Œantfuå¤§ä½¬æ¥æ‰‹å¹¶ç»§ç»­ç»´æŠ¤äº†ESLintçš„é£æ ¼ç±»è§„åˆ™ï¼Œå°†å…¶ä½œä¸ºESLintæ’ä»¶çš„æ–¹å¼è¿›è¡Œæ‰©å±•ï¼Œè€Œä¸æ˜¯åƒä½œè€…æ¨èçš„é‚£æ ·ï¼Œä½¿ç”¨å…¶ä»–å·¥å…·(å¦‚Prettier)ä½œä¸ºæ ·å¼æ ¼å¼åŒ–çš„æ›¿ä»£ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå°±æœ‰äº† **ESLint Stylistic** åº“ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ç®€å•çš„æ¡ˆä¾‹æ¼”ç¤ºå…¶ä½¿ç”¨æ–¹æ³•ï¼Œå…·ä½“çš„å…¥é—¨æ–¹æ³•åŠè¿›é˜¶æ•™ç¨‹è¯·ä»¥å®˜æ–¹æ–‡æ¡£ä¸ºå‡†ï¼š[https://eslint.style/](https://eslint.style/)ã€‚

é¦–å…ˆï¼Œå®‰è£…å¿…è¦ä¾èµ–ï¼š

```bash
# pnpm
pnpm i -D @stylistic/eslint-plugin
# npm
npm i -D @stylistic/eslint-plugin
# yarn
yarn add -D @stylistic/eslint-plugin
```

ç„¶åï¼Œåœ¨ `eslint.config.js` ä¸­æ–°å¢é…ç½®:

```js
import js from '@eslint/js'
import stylistic from '@stylistic/eslint-plugin'

/** @type {import('eslint').Linter.Config[]} */
import js from '@eslint/js'
import stylistic from '@stylistic/eslint-plugin'

/** @type {import('eslint').Linter.Config[]} */
export default [
  js.configs.recommended,
  {
    rules: {
      'no-unused-vars': [0],
    },
  },
  {
    plugins: {
      '@stylistic': stylistic,
    },
  },
  {
    ...stylistic.configs['recommended-flat'],
  },
]
```

è¿™æ—¶ï¼Œåœ¨ `index.js` ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç :

```js
const arr = [1, 2, 3];
```

ç•Œé¢ä¸Šè§‚å¯Ÿä»£ç å°†ä¼šæŠ¥é”™ï¼š

![](./images/eslint-stylisticæ ¡éªŒæ•ˆæœ.png)

å¯è§ï¼Œåœ¨ `Stylistic` ä¸­ï¼Œæ¨èçš„æ˜¯æ²¡æœ‰å¥æœ«åˆ†å·çš„é£æ ¼ã€‚å¦‚æœä½ æƒ³ä¿®æ”¹å®ƒï¼Œè¿˜æ˜¯æŒ‰ç…§ä¹‹å‰çš„æ–¹æ³•è¦†ç›–è§„åˆ™å³å¯ï¼š

```js
import js from '@eslint/js'
import stylistic from '@stylistic/eslint-plugin'

/** @type {import('eslint').Linter.Config[]} */
export default [
  js.configs.recommended,
  {
    rules: {
      'no-unused-vars': [0],
    },
  },
  {
    plugins: {
      '@stylistic': stylistic,
    },
  },
  {
    ...stylistic.configs['recommended-flat'],
  },
  {
    rules: {
      '@stylistic/semi': [0],
    },
  },
]
```


å¯¹äºåˆ¶å®šç¼–ç è§„èŒƒçš„ä½ æ¥è¯´ï¼Œéœ€è¦åšçš„æ ¸å¿ƒå·¥ä½œå°±æ˜¯é…ç½®ä¸Stylisticæ‰“äº¤é“ï¼Œå®šä¹‰ä¸“å±äºä½ çš„å›¢é˜Ÿçš„ç¼–ç é£æ ¼ã€‚

## å…³äºç»„åˆä½¿ç”¨å…¶ä»–å·¥å…·çš„çœ‹æ³•

å¾ˆå¤šæ–‡ç« ä¸­ä¼šæåˆ°ä½¿ç”¨ **Prettier** ã€ **Stylelint** ä¸ ESLintæ­é…å…±åŒå®Œæˆä»£ç çš„æ ¡éªŒä¸ç¾åŒ–å·¥ä½œã€‚

æˆ‘ä¸ªäººçš„çœ‹æ³•æ˜¯åªç”¨ESLintï¼Œç†ç”±å¦‚ä¸‹ï¼š

- Prettierçš„ä¼˜åŠ¿åœ¨äºç¾åŒ–ï¼Œè€ŒESLintä¹Ÿæœ‰ `--fix` å‚æ•°æ¥å®ç°åŒæ ·çš„äº‹ã€‚
- ä¸Šå±‚é¡¹ç›®(éç»„ä»¶åº“ç­‰åŸºç¡€è®¾æ–½)æˆ‘åå¥½äºTailwindCSSè¿™ç§åŸå­åŒ–è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤é¡¹ç›®ä¸­çš„æ ·å¼ä»£ç æå°‘ï¼Œå› è€Œæ— éœ€ä½¿ç”¨Stylelintã€‚
- **ç”±äºæ¯ä¸ªå·¥å…·çš„è®¾è®¡ç†å¿µã€å®ç°ç»†èŠ‚ä¸åŒï¼ŒåŒæ—¶å­¦ä¹ å®ƒä»¬æ˜¯ä¸€ä»¶éå¸¸ç¹ççš„äº‹æƒ…ã€‚**
- æ€§èƒ½ä¼šå˜å·®ã€‚å°½ç®¡åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œéœ€è¦æ ¡éªŒä¸ç¾åŒ–çš„ä»£ç é‡æ˜¯ç¡®å®šçš„ï¼Œä½†ç”±äºä½¿ç”¨äº†å¤šä¸ªå·¥å…·æ¥å…±åŒå®Œæˆæ ¡éªŒä¸ç¾åŒ–å·¥ä½œï¼Œæ¯ä¸ªå·¥å…·çš„ç”Ÿå‘½å‘¨æœŸéƒ½éœ€è¦å®Œæ•´èµ°ä¸€éï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯è€—æ—¶çš„ã€‚


> æ‰©å±•é˜…è¯»ï¼š[https://antfu.me/posts/why-not-prettier-zh](https://antfu.me/posts/why-not-prettier-zh)


## æå–è‡ªå·±çš„ä¸“å±é…ç½® & ESLintæ¦‚å¿µæ‰«ç›²


æˆ‘å°†è‡ªå·±çš„å¸¸ç”¨ESLinté…ç½®å†™åœ¨ä¸ªäººé¡¹ç›®ï¼š[https://github.com/shoppingzh/eslint-config](https://github.com/shoppingzh/eslint-config)ï¼Œæå–çš„å·¥ä½œæ˜¯éå¸¸è½»æ¾çš„ï¼Œä½ å¯ä»¥å‚è€ƒå®˜æ–¹çš„è¿™ç¯‡æ–‡æ¡£ï¼š[https://eslint.org/docs/latest/extend/shareable-configs](https://eslint.org/docs/latest/extend/shareable-configs)ã€‚

> æ¯ä¸ªäººè®¾è®¡åº“çš„æ–¹å¼æœ‰å·®å¼‚ï¼Œæœ‰çš„ä¼šç›´æ¥å¯¼å‡ºä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œæœ‰çš„ä¼šå¯¼å‡ºé…ç½®å¯¹è±¡åˆ—è¡¨ä»¥å¢å¼ºå¯ç»´æŠ¤æ€§ï¼Œæœ‰çš„å¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå‡½æ•°ä»¥æ”¯æŒæ›´åŠ çµæ´»çš„é€»è¾‘ã€‚ä½†ä¸ç®¡æ–¹å¼å¦‚ä½•ï¼Œæœ€ç»ˆäº§å‡ºçš„ç›®æ ‡æ˜¯ä¸€è‡´çš„ï¼Œé‚£å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„é…ç½®å¯¹è±¡(æˆ–åˆ—è¡¨)ã€‚


æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬çš„é‡ç‚¹ä¸æ˜¯å¦‚ä½•æå–é…ç½®ï¼Œè€Œæ˜¯é€šè¿‡é‡ç‚¹å…³æ³¨æºç ï¼Œå°†ESLintçš„å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µè§£é‡Šæ¸…æ¥šã€‚

é¦–å…ˆï¼Œå…³æ³¨ `src/configs/typescript.ts` æ–‡ä»¶ï¼š

```ts
export default function typescript(options: Options = {}): Linter.FlatConfig[] {
  return [{
    files: options.files || DEFAULT_FILES,
    plugins: {
      '@typescript-eslint': plugin, // [!code highlight]
    },
    languageOptions: {
      parser: parser, // [!code highlight]
      sourceType: 'module',
      ecmaVersion: 'latest',
      parserOptions: {
        ecmaFeatures: {
          jsx: true,
        },
        ecmaVersion: 'latest',
      },
    },
  }, {
    files: options.files || DEFAULT_FILES,
    rules: {
      ...plugin.configs.recommended.rules,
      ...createNSRules(options.overrides, '@typescript-eslint'),
    },
  }]
}
```

å½“æˆ‘ä»¬æƒ³è¦ç»™ä¸€ä¸ª `.ts` æ–‡ä»¶åšæ ¡éªŒæ—¶ï¼Œéœ€è¦è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š

- ESLintåªèƒ½è§£æ `.js` æ–‡ä»¶ï¼Œä¸èƒ½ç›´æ¥è§£æ `.ts` æ–‡ä»¶ï¼Œæ€ä¹ˆåŠï¼Ÿ
- è‡ªå®šä¹‰çš„è§„åˆ™ä»å“ªé‡Œæ¥ï¼Ÿè°æ¥åšä¸åŒè§„åˆ™çš„æ ¡éªŒå·¥ä½œï¼Ÿ

ç¬¬ä¸€ä¸ªé—®é¢˜ï¼ŒæŠŠä»»ä½•ç±»å‹çš„ä»£ç ç¿»è¯‘ä¸ºJavaScriptæŠ½è±¡è¯­æ³•æ ‘è¿™ä»¶äº‹æ˜¯ **Parser** åšçš„ï¼Œå› æ­¤ï¼Œ `@typescript-eslint/parser` è¿™ä¸ªåº“è´Ÿè´£å°† `.ts` æ–‡ä»¶å†…å®¹ç¿»è¯‘ä¸ºASTã€‚

ä½ å¯ä»¥è¯•ä¸€ä¸‹ï¼Œåœ¨ä¸Šè¿°ä»£ç ä¸­å°† `parser` é…ç½®å»æ‰ï¼Œåœ¨è¯­æ³•åˆ†æé˜¶æ®µå°±ä¼šå‘ç”Ÿé”™è¯¯ï¼Œä»è€Œå¯¼è‡´ESLintæ— æ³•æŠ¥å‘Šæ­£ç¡®çš„é”™è¯¯æƒ…å†µã€‚

> å¦‚æœæ²¡æœ‰æ˜¾å¼åœ°æŒ‡å®šParserï¼Œåˆ™é»˜è®¤ä½¿ç”¨Espreeä½œä¸ºParserå»è§£æ `.js` æ–‡ä»¶ã€‚

ç¬¬äºŒä¸ªé—®é¢˜ï¼Œè‡ªå®šä¹‰çš„è§„åˆ™ç”± **Plugin** å®ç°ï¼ŒPluginåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

- è‡ªå®šä¹‰è§„åˆ™(rules)ï¼šæ ¸å¿ƒï¼Œæ¯ä¸€ä¸ªè§„åˆ™å¯¹åº”ä¸€ä¸ªæ ¡éªŒå‡½æ•°ï¼Œæœ€ç»ˆä½ åœ¨ `eslint.config.js` ä¸­é…ç½®çš„ `rules` å°±æ˜¯åˆ†å‘åˆ°ä¸åŒçš„æ’ä»¶çš„è§„åˆ™æ¥æ ¡éªŒï¼›
- é…ç½®(configs)ï¼šæ’ä»¶å¯ä»¥æŠŠä¸€äº›æ¨èé…ç½®å¯¼å‡ºï¼Œä»¥ä¾›ä½¿ç”¨è€…å¿«é€Ÿä½¿ç”¨ï¼›
- ç¯å¢ƒ(environments)ï¼šå…¨å±€å˜é‡å’ŒParserçš„é…ç½®é¡¹ï¼›
- å¤„ç†å™¨(processors)ï¼šè¿™ä¸ªæ”¾åˆ°åé¢è¯´ã€‚

å› æ­¤ï¼Œå¦‚æœä½ æƒ³è¦ä¸€äº›é™¤äº†ESLintä¹‹å¤–çš„è§„åˆ™ä»¥ä¾›æ ¡éªŒä¸åŒçš„ä»£ç ï¼Œä½¿ç”¨æ’ä»¶æ˜¯å¿…é¡»çš„ã€‚

é™¤äº† **Parser** ä¸ **Plugin** ï¼ŒESLintè¿˜æœ‰ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š**Prosessor** ã€‚æˆ‘ä»¬å…³æ³¨ `src/configs/vue.ts` æ–‡ä»¶ï¼š

```ts
export default function vue(options: Options = {}): Linter.FlatConfig[] {
  const version = options.version || 3
  const rules = {
    ...plugin.configs['base'].rules,
    ...plugin.configs[version === 2 ? 'essential' : 'vue3-essential'].rules,
    ...plugin.configs[version === 2 ? 'recommended' : 'vue3-recommended'].rules,
  }
  return [{
    plugins: { vue: plugin, },
  }, {
    files: options.files || DEFAULT_FILES,
    languageOptions: {
      parser: parser,
      parserOptions: {
        parser: options.typescript ? tsParser : null,
        extraFileExtensions: ['.vue'],
      },
      sourceType: 'module',
    },
    processor: plugin.processors['.vue'], // éœ€è¦æ˜¾å¼æŒ‡å®šprocessor
    rules: {
      ...rules,
      ...createNSRules(options.overrides, 'vue'),
    },
  }]
}
```

ä¸TypeScriptçš„æ’ä»¶ä¸åŒï¼Œä½¿ç”¨Vueçš„æ’ä»¶æ—¶ï¼Œè¿˜éœ€è¦ä½¿ç”¨åˆ°Processorï¼Œç®€å•æ¥è®²ï¼š

**Prosessoræ˜¯Parserçš„å‰å¤„ç†ï¼Œå½“éœ€è¦æ ¡éªŒ `.vue` æ–‡ä»¶çš„ä»£ç æ—¶ï¼Œä½ éœ€è¦æ ¡éªŒçš„æ˜¯ `.vue` æ–‡ä»¶çš„ `<template>` å’Œ `<script>` ï¼ŒProcessorçš„ä½œç”¨å°±æ˜¯ä» `.vue` æ–‡ä»¶ä¸­ï¼Œå°†éœ€è¦æ ¡éªŒçš„ä»£ç æå–å‡ºæ¥ã€‚**

åˆ°æ­¤å¤„ä¸ºæ­¢ï¼Œå½“ä½ çœ‹åˆ°ä»»ä½•ESLinté…ç½®æ—¶ï¼Œå·²ç»èƒ½å¤Ÿç†è§£æ¯ä¸ªé…ç½®çš„å…·ä½“å«ä¹‰ï¼Œè€Œä¸è‡³äºåœ¨Parserã€Pluginã€Prosessorç­‰ä¼—å¤šæ¦‚å¿µä¸­æ„Ÿåˆ°å¤´æ™•ç›®çœ©ã€ä¸çŸ¥æ‰€æªäº†ã€‚


## æ·±å…¥ç†è§£ESLint

å¯¹äºESLintçš„æ·±åº¦å­¦ä¹ ï¼Œåé¢ä¼šå¼€ä¸€ç¯‡æ–‡ç« å•ç‹¬æ¢è®¨ï¼Œæ•¬è¯·æœŸå¾…ã€‚

